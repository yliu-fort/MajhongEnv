#:kivy 2.1.0
#:import dp kivy.metrics.dp

<StartMenuScreen@Screen>:
    name: "start_menu"
    BoxLayout:
        orientation: "vertical"
        padding: dp(48)
        spacing: dp(24)
        size_hint: 1, 1
        canvas.before:
            Color:
                rgba: 12/255.0, 30/255.0, 60/255.0, 1
            Rectangle:
                size: self.size
                pos: self.pos
        Widget:
            size_hint_y: None
            height: dp(80)
        Label:
            text: "Mahjong"
            font_size: dp(48)
            size_hint_y: None
            height: self.texture_size[1] + dp(12)
            color: 230/255.0, 230/255.0, 230/255.0, 1
        Widget:
            size_hint_y: None
            height: dp(40)
        Button:
            text: "AI vs Human"
            size_hint: None, None
            size: dp(240), dp(56)
            pos_hint: {"center_x": 0.5}
            on_release: app.start_ai_vs_human()
        Button:
            text: "AI vs AI"
            size_hint: None, None
            size: dp(240), dp(56)
            pos_hint: {"center_x": 0.5}
            on_release: app.start_ai_vs_ai()
        Button:
            text: "Replay"
            size_hint: None, None
            size: dp(240), dp(56)
            pos_hint: {"center_x": 0.5}
            on_release: app.start_replay()
        Widget:
            size_hint_y: 1

<GameScreen@Screen>:
    name: "game"

<MahjongRoot>:
    board: board
    status_label: status_label
    reward_label: reward_label
    done_label: done_label
    pause_button: pause_button
    auto_button: auto_button
    step_button: step_button
    language_spinner: language_spinner
    quick_action_bar: quick_action_bar
    action_timer_label: action_timer_label
    canvas.before:
        Color:
            rgba: 12/255.0, 30/255.0, 60/255.0, 1
        Rectangle:
            size: self.size
            pos: self.pos
    MahjongBoardWidget:
        id: board
        size_hint: None, None
        width: min(root.width, root.height)
        height: min(root.width, root.height)
        pos: (root.center_x - self.width / 2, root.center_y - self.height / 2)
    BoxLayout:
        id: quick_action_bar
        size_hint: None, None
        size_hint_y: None
        height: 56
        width: min(board.width - 48, max(self.minimum_width + self.padding[0] + self.padding[2], 0)) if board.width > 48 else max(self.minimum_width + self.padding[0] + self.padding[2], 0)
        pos: board.x + (board.width - self.width) / 2, board.y + 96
        orientation: 'horizontal'
        padding: 8, 6
        spacing: 6
        opacity: 0
        disabled: True
        canvas.before:
            Color:
                rgba: 5/255.0, 5/255.0, 5/255.0, self.opacity
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: [12, 12, 12, 12]
    Label:
        id: status_label
        text: ""
        halign: 'left'
        valign: 'top'
        text_size: self.width, None
        size_hint: None, None
        size: max(240, self.texture_size[0]), self.texture_size[1]
        pos: 16, root.height - self.height - 16
        color: 170/255.0, 190/255.0, 210/255.0, 1
    Label:
        id: reward_label
        text: ""
        halign: 'right'
        valign: 'top'
        text_size: None, None
        size_hint: None, None
        size: self.texture_size
        pos: root.width - self.width - 16, root.height - self.height - 16
        color: 235/255.0, 235/255.0, 235/255.0, 1
    Label:
        id: done_label
        text: ""
        halign: 'right'
        valign: 'top'
        text_size: None, None
        size_hint: None, None
        size: self.texture_size
        pos: root.width - self.width - 16, reward_label.y - self.height - 4
        color: 220/255.0, 120/255.0, 120/255.0, 1
    Button:
        id: step_button
        text: ""
        size_hint: None, None
        size: 160, 44
        pos: root.width - self.width - 16, 16
        background_normal: ''
        background_color: 5/255.0, 5/255.0, 5/255.0, 1
    Button:
        id: auto_button
        text: ""
        size_hint: None, None
        size: 160, 44
        pos: step_button.x, step_button.top + 10
        background_normal: ''
        background_color: 5/255.0, 5/255.0, 5/255.0, 1
    Button:
        id: pause_button
        text: ""
        size_hint: None, None
        size: 160, 44
        pos: auto_button.x, auto_button.top + 10
        background_normal: ''
        background_color: 5/255.0, 5/255.0, 5/255.0, 1
    Spinner:
        id: language_spinner
        text: ""
        values: ()
        size_hint: None, None
        size: 160, 44
        pos: pause_button.x, pause_button.top + 10
        background_normal: ''
        background_color: 5/255.0, 5/255.0, 5/255.0, 1
        color: 235/255.0, 235/255.0, 235/255.0, 1
    Label:
        id: action_timer_label
        text: ""
        size_hint: None, None
        width: 96
        height: 28
        x: board.right - 32
        y: board.top - 96
        halign: 'right'
        valign: 'top'
        text_size: self.size
        color: 235/255.0, 235/255.0, 235/255.0, 1
        opacity: 0

<MahjongBoardWidget>:
    canvas.before:
        Color:
            rgba: 24/255.0, 60/255.0, 90/255.0, 1
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [16, 16, 16, 16]
    canvas.after:
        Color:
            rgba: 40/255.0, 90/255.0, 130/255.0, 1
        Line:
            rounded_rectangle: (*self.pos, *self.size, 16)
            width: 3

